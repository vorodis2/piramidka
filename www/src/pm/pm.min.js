!function(t){var e=window.webpackHotUpdate;window.webpackHotUpdate=function(t,r){!function(t,e){if(!A[t]||!x[t])return;for(var r in x[t]=!1,e)Object.prototype.hasOwnProperty.call(e,r)&&(m[r]=e[r]);0==--b&&0===v&&M()}(t,r),e&&e(t,r)};var r,i=!0,n="ba3cbd7db46e93bbb584",a=1e4,o={},s=[],h=[];function c(t){var e=w[t];if(!e)return R;var i=function(i){return e.hot.active?(w[i]?-1===w[i].parents.indexOf(t)&&w[i].parents.push(t):(s=[t],r=i),-1===e.children.indexOf(i)&&e.children.push(i)):(console.warn("[HMR] unexpected require("+i+") from disposed module "+t),s=[]),R(i)},n=function(t){return{configurable:!0,enumerable:!0,get:function(){return R[t]},set:function(e){R[t]=e}}};for(var a in R)Object.prototype.hasOwnProperty.call(R,a)&&"e"!==a&&"t"!==a&&Object.defineProperty(i,a,n(a));return i.e=function(t){return"ready"===d&&f("prepare"),v++,R.e(t).then(e,function(t){throw e(),t});function e(){v--,"prepare"===d&&(g[t]||j(t),0===v&&0===b&&M())}},i.t=function(t,e){return 1&e&&(t=i(t)),R.t(t,-2&e)},i}function l(t){var e={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:r!==t,active:!0,accept:function(t,r){if(void 0===t)e._selfAccepted=!0;else if("function"==typeof t)e._selfAccepted=t;else if("object"==typeof t)for(var i=0;i<t.length;i++)e._acceptedDependencies[t[i]]=r||function(){};else e._acceptedDependencies[t]=r||function(){}},decline:function(t){if(void 0===t)e._selfDeclined=!0;else if("object"==typeof t)for(var r=0;r<t.length;r++)e._declinedDependencies[t[r]]=!0;else e._declinedDependencies[t]=!0},dispose:function(t){e._disposeHandlers.push(t)},addDisposeHandler:function(t){e._disposeHandlers.push(t)},removeDisposeHandler:function(t){var r=e._disposeHandlers.indexOf(t);r>=0&&e._disposeHandlers.splice(r,1)},check:E,apply:O,status:function(t){if(!t)return d;u.push(t)},addStatusHandler:function(t){u.push(t)},removeStatusHandler:function(t){var e=u.indexOf(t);e>=0&&u.splice(e,1)},data:o[t]};return r=void 0,e}var u=[],d="idle";function f(t){d=t;for(var e=0;e<u.length;e++)u[e].call(null,t)}var p,m,y,b=0,v=0,g={},x={},A={};function T(t){return+t+""===t?+t:t}function E(t){if("idle"!==d)throw new Error("check() is only allowed in idle status");return i=t,f("check"),(e=a,e=e||1e4,new Promise(function(t,r){if("undefined"==typeof XMLHttpRequest)return r(new Error("No browser support"));try{var i=new XMLHttpRequest,n=R.p+"hot-update/hot-update.json";i.open("GET",n,!0),i.timeout=e,i.send(null)}catch(t){return r(t)}i.onreadystatechange=function(){if(4===i.readyState)if(0===i.status)r(new Error("Manifest request to "+n+" timed out."));else if(404===i.status)t();else if(200!==i.status&&304!==i.status)r(new Error("Manifest request to "+n+" failed."));else{try{var e=JSON.parse(i.responseText)}catch(t){return void r(t)}t(e)}}})).then(function(t){if(!t)return f("idle"),null;x={},g={},A=t.c,y=t.h,f("prepare");var e=new Promise(function(t,e){p={resolve:t,reject:e}});m={};return j(0),"prepare"===d&&0===v&&0===b&&M(),e});var e}function j(t){var e;A[t]?(x[t]=!0,b++,(e=document.createElement("script")).charset="utf-8",e.src=R.p+"hot-update/hot-update.js",document.head.appendChild(e)):g[t]=!0}function M(){f("ready");var t=p;if(p=null,t)if(i)Promise.resolve().then(function(){return O(i)}).then(function(e){t.resolve(e)},function(e){t.reject(e)});else{var e=[];for(var r in m)Object.prototype.hasOwnProperty.call(m,r)&&e.push(T(r));t.resolve(e)}}function O(e){if("ready"!==d)throw new Error("apply() is only allowed in ready status");var r,i,a,h,c;function l(t){for(var e=[t],r={},i=e.slice().map(function(t){return{chain:[t],id:t}});i.length>0;){var n=i.pop(),a=n.id,o=n.chain;if((h=w[a])&&!h.hot._selfAccepted){if(h.hot._selfDeclined)return{type:"self-declined",chain:o,moduleId:a};if(h.hot._main)return{type:"unaccepted",chain:o,moduleId:a};for(var s=0;s<h.parents.length;s++){var c=h.parents[s],l=w[c];if(l){if(l.hot._declinedDependencies[a])return{type:"declined",chain:o.concat([c]),moduleId:a,parentId:c};-1===e.indexOf(c)&&(l.hot._acceptedDependencies[a]?(r[c]||(r[c]=[]),u(r[c],[a])):(delete r[c],e.push(c),i.push({chain:o.concat([c]),id:c})))}}}}return{type:"accepted",moduleId:t,outdatedModules:e,outdatedDependencies:r}}function u(t,e){for(var r=0;r<e.length;r++){var i=e[r];-1===t.indexOf(i)&&t.push(i)}}e=e||{};var p={},b=[],v={},g=function(){console.warn("[HMR] unexpected require("+E.moduleId+") to disposed module")};for(var x in m)if(Object.prototype.hasOwnProperty.call(m,x)){var E;c=T(x);var j=!1,M=!1,O=!1,S="";switch((E=m[x]?l(c):{type:"disposed",moduleId:x}).chain&&(S="\nUpdate propagation: "+E.chain.join(" -> ")),E.type){case"self-declined":e.onDeclined&&e.onDeclined(E),e.ignoreDeclined||(j=new Error("Aborted because of self decline: "+E.moduleId+S));break;case"declined":e.onDeclined&&e.onDeclined(E),e.ignoreDeclined||(j=new Error("Aborted because of declined dependency: "+E.moduleId+" in "+E.parentId+S));break;case"unaccepted":e.onUnaccepted&&e.onUnaccepted(E),e.ignoreUnaccepted||(j=new Error("Aborted because "+c+" is not accepted"+S));break;case"accepted":e.onAccepted&&e.onAccepted(E),M=!0;break;case"disposed":e.onDisposed&&e.onDisposed(E),O=!0;break;default:throw new Error("Unexception type "+E.type)}if(j)return f("abort"),Promise.reject(j);if(M)for(c in v[c]=m[c],u(b,E.outdatedModules),E.outdatedDependencies)Object.prototype.hasOwnProperty.call(E.outdatedDependencies,c)&&(p[c]||(p[c]=[]),u(p[c],E.outdatedDependencies[c]));O&&(u(b,[E.moduleId]),v[c]=g)}var I,C=[];for(i=0;i<b.length;i++)c=b[i],w[c]&&w[c].hot._selfAccepted&&C.push({module:c,errorHandler:w[c].hot._selfAccepted});f("dispose"),Object.keys(A).forEach(function(t){!1===A[t]&&function(t){delete installedChunks[t]}(t)});for(var H,B,N=b.slice();N.length>0;)if(c=N.pop(),h=w[c]){var P={},z=h.hot._disposeHandlers;for(a=0;a<z.length;a++)(r=z[a])(P);for(o[c]=P,h.hot.active=!1,delete w[c],delete p[c],a=0;a<h.children.length;a++){var _=w[h.children[a]];_&&((I=_.parents.indexOf(c))>=0&&_.parents.splice(I,1))}}for(c in p)if(Object.prototype.hasOwnProperty.call(p,c)&&(h=w[c]))for(B=p[c],a=0;a<B.length;a++)H=B[a],(I=h.children.indexOf(H))>=0&&h.children.splice(I,1);for(c in f("apply"),n=y,v)Object.prototype.hasOwnProperty.call(v,c)&&(t[c]=v[c]);var D=null;for(c in p)if(Object.prototype.hasOwnProperty.call(p,c)&&(h=w[c])){B=p[c];var G=[];for(i=0;i<B.length;i++)if(H=B[i],r=h.hot._acceptedDependencies[H]){if(-1!==G.indexOf(r))continue;G.push(r)}for(i=0;i<G.length;i++){r=G[i];try{r(B)}catch(t){e.onErrored&&e.onErrored({type:"accept-errored",moduleId:c,dependencyId:B[i],error:t}),e.ignoreErrored||D||(D=t)}}}for(i=0;i<C.length;i++){var k=C[i];c=k.module,s=[c];try{R(c)}catch(t){if("function"==typeof k.errorHandler)try{k.errorHandler(t)}catch(r){e.onErrored&&e.onErrored({type:"self-accept-error-handler-errored",moduleId:c,error:r,originalError:t}),e.ignoreErrored||D||(D=r),D||(D=t)}else e.onErrored&&e.onErrored({type:"self-accept-errored",moduleId:c,error:t}),e.ignoreErrored||D||(D=t)}}return D?(f("fail"),Promise.reject(D)):(f("idle"),new Promise(function(t){t(b)}))}var w={};function R(e){if(w[e])return w[e].exports;var r=w[e]={i:e,l:!1,exports:{},hot:l(e),parents:(h=s,s=[],h),children:[]};return t[e].call(r.exports,r,r.exports,c(e)),r.l=!0,r.exports}R.m=t,R.c=w,R.d=function(t,e,r){R.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},R.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},R.t=function(t,e){if(1&e&&(t=R(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(R.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)R.d(r,i,function(e){return t[e]}.bind(null,i));return r},R.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return R.d(e,"a",e),e},R.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},R.p="src/pm/",R.h=function(){return n},c(2)(R.s=2)}([function(t,e,r){"use strict";var i=r(1);function n(t,e,r){this.type="PMMat";this.par=t,this.visi3D=e,this.objbase=r,this.pmTexture=this.par.tex,this.ser=window.location.href;var i,n,a=window.location.href.split("?")[0].split("/");this.server="";for(var o=0;o<a.length-1;o++)this.server+=a[o]+"/";this.aOBase={},this.aO={},this.matBag=new THREE.MeshBasicMaterial({color:16711680}),this.objCesh={},this.getIDObj=function(t,e){if(null!=this.objCesh[t]){for(var r=0;r<this.objCesh[t].length;r++)if(1==this.testM(this.objCesh[t][r].userData,e))return this.objCesh[t][r]}else this.objCesh[t]=[];if(i=this.par.mat.getIDReturn(t,!0),null!=e)for(n in e)if("color"==n){var a=new THREE.Color(e[n]);i.color=a}return i.userData=e,this.objCesh[t].push(i),i},this.testM=function(t,e){if(null==t){if(null==e)return!0}else if(null!=e){for(n in!1,e){if(!t[n])return!1;if(t[n]!==e[n])return!1}return!0}return!1},this.getIDReturn=function(t){return this.matBag}}function a(t){THREE.Group.call(this),this.type="MeshCombined",this._meshes=t,this._ready=!1,this.init()}a.prototype=Object.create(THREE.Group.prototype),a.constructor=a,Object.defineProperties(a.prototype,{}),a.prototype.canAnalyze=function(){return this._meshes.reduce(function(t,e){return t&&e.geometry},!0)},a.prototype._getMaterialKey=function(t){return t.material.uuid},a.prototype.init=function(){var t=this;if(this._ready||!this.canAnalyze)return!1;var e=[],r={};return this._meshes.forEach(function(t){var e=t.geometry.uuid;r[e]||(r[e]=[]),r[e].push(t)}),Object.keys(r).forEach(function(i){var n=r[i],a=n[0].geometry;if(1!==n.length){var o={};n.forEach(function(e){var r=t._getMaterialKey(e);o[r]||(o[r]=[]),o[r].push(e)}),Object.keys(o).forEach(function(t){var r=o[t],i=r[0].material,n=r.length,s=new THREE.InstancedMesh(a,i.clone(),n);e.push(s),r.forEach(function(t,e){s.setQuaternionAt(e,t.quaternion),s.setPositionAt(e,t.position),s.setScaleAt(e,t.scale)}),s.needsUpdate()})}else e.push(n[0])}),e.forEach(function(e){return t.add(e)}),!0};var o=new THREE.MeshDepthMaterial;o.depthPacking=THREE.RGBADepthPacking,o.clipping=!0,o.defines={INSTANCE_TRANSFORM:""};var s=THREE.ShaderLib.distanceRGBA,h=THREE.UniformsUtils.clone(s.uniforms),c=new THREE.ShaderMaterial({defines:{USE_SHADOWMAP:"",INSTANCE_TRANSFORM:""},uniforms:h,vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,clipping:!0});THREE.InstancedMesh=function(t,e,r){THREE.Mesh.call(this,(new u).setGeometry(t),e);var i=this;this.type="InstancedMesh",this.numInstances=r||1,this.customDepthMaterial=o,this.customDistanceMaterial=c,this.onAfterRender=function(t,e,r,n,a,o){i.geometry.update(r)}},THREE.InstancedMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.InstancedMesh.constructor=THREE.InstancedMesh,Object.defineProperties(THREE.InstancedMesh.prototype,{material:{set:function(t){this._material=t,this._material.defines=this._material.defines||{},this._material.defines.INSTANCE_TRANSFORM="",this._material.needsUpdate=!0},get:function(){return this._material}},geometry:{set:function(t){t instanceof u?this._geometry=t:this._geometry.setGeometry(t)},get:function(){return this._geometry}},numInstances:{set:function(t){this._numInstances=t,this.geometry.setCount(this.numInstances)},get:function(){return this._numInstances}}}),THREE.InstancedMesh.prototype.setPositionAt=function(t,e){this.geometry.setPositionAt(t,e)},THREE.InstancedMesh.prototype.setQuaternionAt=function(t,e){this.geometry.setQuaternionAt(t,e)},THREE.InstancedMesh.prototype.setScaleAt=function(t,e){this.geometry.setScaleAt(t,e)},THREE.InstancedMesh.prototype.getPositionAt=function(t,e){return this.geometry.getPositionAt(t,e)},THREE.InstancedMesh.prototype.getQuaternionAt=function(t,e){return this.geometry.getQuaternionAt(t,e)},THREE.InstancedMesh.prototype.getScaleAt=function(t,e){return this.geometry.getScaleAt(t,e)},THREE.InstancedMesh.prototype.needsUpdate=function(){this.geometry.needsUpdate=!0,this.geometry.computeBoundingSphere()};var l;new THREE.BoxBufferGeometry(1,1,1),new THREE.MeshNormalMaterial({wireframe:!0});function u(){THREE.InstancedBufferGeometry.call(this),this.count=0;var t=this;this.boundOrigin=new THREE.Box3,this.arrTransform=[],this.gridTransform=new f(this.arrTransform),this.setCount=function(t){if(this.count=t,(this.maxInstancedCount||0)<t&&(!this.attributes.instanceQuaternion||this.attributes.instanceQuaternion.count<t)){var e={instanceQuaternion:new Float32Array(4*t),instancePosition:new Float32Array(3*t),instanceScale:new Float32Array(3*t)};this.setAttribute("instanceQuaternion",new THREE.InstancedBufferAttribute(e.instanceQuaternion,4)),this.setAttribute("instancePosition",new THREE.InstancedBufferAttribute(e.instancePosition,3)),this.setAttribute("instanceScale",new THREE.InstancedBufferAttribute(e.instanceScale,3)),this.needsUpdate=!0}for(var r=0;r<t;r++)this.arrTransform[r]=new d(this.boundOrigin);this.maxInstancedCount=t},this.setGeometry=function(t){return this.copy(t),this.boundOrigin.setFromBufferAttribute(this.attributes.position),this};var e=new THREE.Frustum,r=new THREE.Matrix4;this.arrTransformVisible=[],this.update=function(i){r.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),e.setFromMatrix(r);var n=0;this.arrTransformVisible=[];for(var a=0;a<this.gridTransform.arrGridIndex.length;a++){var o=this.gridTransform.arrGridIndex[a];if(e.intersectsBox(o.boundingBox))for(var s=0;s<o.arrTransform.length;s++){var h=o.arrTransform[s];this.arrTransformVisible.push(h),this.setTransformAt(n++,h)}}t.maxInstancedCount=n,t.needsUpdate=!0},this.updateGrid=function(){this.gridTransform.updateGrid()}}function d(t){this.boundOrigin=t,this._boundingBox=null,this.p=new THREE.Vector3,this.s=new THREE.Vector3(1,1,1),this.q=new THREE.Quaternion,this.setP=function(t){this.p.copy(t)},this.setS=function(t){this.s.copy(t)},this.setQ=function(t){this.q.copy(t)}}function f(t){var e=this;this.arrTransform=t;var r=100;function i(t){var i="x"+Math.floor(t.x/r)+"y"+Math.floor(t.y/r)+"z"+Math.floor(t.z/r);return e.cache[i]||(e.cache[i]=new p),e.cache[i]}this.arrGridIndex=[],this.cache={},this.updateGrid=function(){this.arrGridIndex.length=0,this.cache={};for(var t=0;t<this.arrTransform.length;t++){var e=this.arrTransform[t];i(e.p).arrTransform.push(e)}for(var r in this.cache)this.cache[r].computeBoundingBox(),this.arrGridIndex.push(this.cache[r])}}function p(){this.arrTransform=[],this._boundingBox=null}u.prototype=Object.create(THREE.InstancedBufferGeometry.prototype),u.constructor=u,u.prototype.setTransformAt=function(t,e){this.attributes.instanceScale.setXYZ(t,e.s.x,e.s.y,e.s.z),this.attributes.instancePosition.setXYZ(t,e.p.x,e.p.y,e.p.z),this.attributes.instanceQuaternion.setXYZW(t,e.q.x,e.q.y,e.q.z,e.q.w)},u.prototype.setPositionAt=function(t,e){this.arrTransform[t].setP(e),this.setTransformAt(t,this.arrTransform[t])},u.prototype.setQuaternionAt=function(t,e){this.arrTransform[t].setQ(e),this.setTransformAt(t,this.arrTransform[t])},u.prototype.setScaleAt=function(t,e){this.arrTransform[t].setS(e),this.setTransformAt(t,this.arrTransform[t])},u.prototype.getPositionAt=function(t,e){return e?e.copy(this.arrTransform[t].p):this.arrTransform[t].p},u.prototype.getQuaternionAt=function(t,e){return e?e.copy(this.arrTransform[t].q):this.arrTransform[t].q},u.prototype.getScaleAt=function(t,e){return e?e.copy(this.arrTransform[t].s):this.arrTransform[t].s},u.prototype.computeBoundingSphere=function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere),this.computeBoundingBox(),this.boundingBox.getBoundingSphere(this.boundingSphere),this.updateGrid()},u.prototype.computeBoundingBox=function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3),this.boundingBox.makeEmpty();for(var t=0,e=this.count;t<e;t++)this.boundingBox.union(this.getBoundingBoxAt(t))},u.prototype.getBoundingBoxAt=function(t){return this.arrTransform[t].boundingBox},Object.defineProperties(u.prototype,{needsUpdate:{set:function(t){this.attributes.instancePosition.needsUpdate=t,this.attributes.instanceQuaternion.needsUpdate=t,this.attributes.instanceScale.needsUpdate=t},get:function(){return!1}}}),d.prototype.computeBoundingBox=(l=new THREE.Matrix4,function(){return this._boundingBox||(this._boundingBox=new THREE.Box3),l.compose(this.p,this.q,this.s),this.boundingBox.copy(this.boundOrigin),this.boundingBox.applyMatrix4(l),this.boundingBox}),Object.defineProperties(d.prototype,{boundingBox:{set:function(t){this._boundingBox=t},get:function(){return this._boundingBox||this.computeBoundingBox()}}}),p.prototype.computeBoundingBox=function(){this._boundingBox||(this._boundingBox=new THREE.Box3),this.boundingBox.makeEmpty();for(var t=0,e=this.arrTransform.length;t<e;t++)this.boundingBox.union(this.arrTransform[t].boundingBox);return this.boundingBox},Object.defineProperties(p.prototype,{boundingBox:{set:function(t){this._boundingBox=t},get:function(){return this._boundingBox||this.computeBoundingBox()}}});var m=["#ifndef INSTANCE_TRANSFORM","vec3 transformed = vec3( position );","#else","#ifndef INSTANCE_MATRIX","mat4 _instanceMatrix = getInstanceMatrix();","#define INSTANCE_MATRIX","#endif","vec3 transformed = ( _instanceMatrix * vec4( position , 1. )).xyz;","#endif"].join("\n"),y=["#ifdef USE_COLOR","diffuseColor.rgb *= vColor;","#endif","#if defined(INSTANCE_COLOR)","diffuseColor.rgb *= vInstanceColor;","#endif"].join("\n"),b=["#ifdef USE_COLOR","varying vec3 vColor;","#endif","#if defined( INSTANCE_COLOR )","varying vec3 vInstanceColor;","#endif"].join("\n"),v=["#ifdef USE_COLOR","vColor.xyz = color.xyz;","#endif","#if defined( INSTANCE_COLOR ) && defined( INSTANCE_TRANSFORM )","vInstanceColor = instanceColor;","#endif"].join("\n"),g=["#ifdef FLIP_SIDED","objectNormal = -objectNormal;","#endif","#ifndef INSTANCE_TRANSFORM","vec3 transformedNormal = normalMatrix * objectNormal;","#else","#ifndef INSTANCE_MATRIX ","mat4 _instanceMatrix = getInstanceMatrix();","#define INSTANCE_MATRIX","#endif","#ifndef INSTANCE_UNIFORM","vec3 transformedNormal =  transposeMat3( inverse( mat3( modelViewMatrix * _instanceMatrix ) ) ) * objectNormal ;","#else","vec3 transformedNormal = ( modelViewMatrix * _instanceMatrix * vec4( objectNormal , 0.0 ) ).xyz;","#endif","#endif"].join("\n"),x=["#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )","varying vec2 vUv;","uniform mat3 uvTransform;","#endif","#ifdef INSTANCE_TRANSFORM","mat3 inverse(mat3 m) {","float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];","float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];","float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];","float b01 = a22 * a11 - a12 * a21;","float b11 = -a22 * a10 + a12 * a20;","float b21 = a21 * a10 - a11 * a20;","float det = a00 * b01 + a01 * b11 + a02 * b21;","return mat3(b01, (-a22 * a01 + a02 * a21), ( a12 * a01 - a02 * a11),","b11, ( a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10),","b21, (-a21 * a00 + a01 * a20), ( a11 * a00 - a01 * a10)) / det;","}","attribute vec3 instancePosition;","attribute vec4 instanceQuaternion;","attribute vec3 instanceScale;","#if defined( INSTANCE_COLOR )","attribute vec3 instanceColor;","varying vec3 vInstanceColor;","#endif","mat4 getInstanceMatrix(){","vec4 q = instanceQuaternion;","vec3 s = instanceScale;","vec3 v = instancePosition;","vec3 q2 = q.xyz + q.xyz;","vec3 a = q.xxx * q2.xyz;","vec3 b = q.yyz * q2.yzz;","vec3 c = q.www * q2.xyz;","vec3 r0 = vec3( 1.0 - (b.x + b.z) , a.y + c.z , a.z - c.y ) * s.xxx;","vec3 r1 = vec3( a.y - c.z , 1.0 - (a.x + b.z) , b.y + c.x ) * s.yyy;","vec3 r2 = vec3( a.z + c.y , b.y - c.x , 1.0 - (a.x + b.x) ) * s.zzz;","return mat4(","r0 , 0.0,","r1 , 0.0,","r2 , 0.0,","v  , 1.0",");","}","#endif"].join("\n");function A(t,e,r){this.type="PMFilt";var i=this;this.par=t,this.visi3D=e,this.objbase=r,this.ceshGeom=new M(this),this.setObjS=function(t,e){!0,t.object.filt&&0!=t.object.filt.length?new T(this,t,e):this.finalObjS(t,e)},this.finalObjS=function(t,e){t.object.param&&(1==t.object.param.kesh&&i.ceshGeom.set(t.content3d),null!=t.object.param.sG&&1==t.object.param.sG&&i.ceshGeom.groupGeometri(t.content3d)),e()},this.dragParam=function(t,e){if(t.children)for(var r=t.children.length-1;r>=0;r--)this.dragParam(t.children[r],e);null==t.bs&&(t.castShadow=e.tOt,t.receiveShadow=e.tNa);var i=e.rO;trace("^^",t.bs,e.tOt),t.iz&&t.iz.renderOrder&&(i=t.iz.renderOrder),t.renderOrder=i},this.dragPozition=function(t){var e=!1;t.object&&t.object.psm&&(e=!0,null!=t.object.psm.active&&0==t.object.psm.active&&(e=!1)),1==e?(t.content3d.position.set(t.object.psm.p[0],t.object.psm.p[1],t.object.psm.p[2]),t.content3d.rotation.set(t.object.psm.r[0],t.object.psm.r[1],t.object.psm.r[2]),t.content3d.scale.set(t.object.psm.s[0],t.object.psm.s[1],t.object.psm.s[2])):(t.content3d.position.set(0,0,0),t.content3d.rotation.set(0,0,0),t.content3d.scale.set(1,1,1))}}function T(t,e,r){this.type="StartFilt";this.par=t,this.hron=e,this.fun=r,this.hron.filt=this,this.array=[];var i,n=0;this.dragFilt=function(){n!=this.hron.object.filt.length?(i=this.hron.object.filt[n].type,n++,"mark"==i&&this.array.push(new j(this,this.hron.object.filt[n-1],this.array.length)),"material"==i&&this.array.push(new E(this,this.hron.object.filt[n-1],this.array.length))):this.par.finalObjS(this.hron,this.fun)},this.dragFilt()}function E(t,e,r){this.type="PMMaterial";this.par=t,this.obj=e,this.idArr=r,this.mat=this.par.par.par.mat.getTestTitle(e.id),null!=this.mat?(this.parsing=function(t){if(t.children)for(var e=t.children.length-1;e>=0;e--)this.parsing(t.children[e]);null!=t.material&&(t.material=this.mat)},this.parsing(t.hron.content3d),this.par.dragFilt()):this.par.dragFilt()}function j(t,e,r){this.type="PMMark";var i=this;if(this.par=t,this.obj=e,this.idArr=r,this.idKey=e.id,this.c3d=t.hron.content3d,this.arrName=[],this.arrayObj=[],"null"!=this.idKey){var n,a=!0;if(-1!=e.id.indexOf("|")){for(var o=e.id.split("|"),s=o[0].split(","),h=o[1].split(","),c=0;c<s.length;c++)this.arrName[c]={name:s[c],id:1*h[c],obCont:null};a=!1}else a=!0,this.arrName[0]={name:"null",id:e.id,obCont:null};this.parsing=function(t){if(t.children)for(var e=t.children.length-1;e>=0;e--)this.parsing(t.children[e]);if("Mesh"==t.type)if(a)n=this.arrName[0].obCont.clone(),t.parent.add(n),n.position.set(t.position.x,t.position.y,t.position.z),n.rotation.set(t.rotation.x,t.rotation.y,t.rotation.z),n.scale.set(t.scale.x,t.scale.y,t.scale.z),t.parent.remove(t);else if(t.name)for(e=this.arrName.length-1;e>=0;e--)if(-1!=t.name.indexOf(this.arrName[e].name))return n=this.arrName[e].obCont.clone(),t.parent.add(n),n.position.set(t.position.x,t.position.y,t.position.z),n.rotation.set(t.rotation.x,t.rotation.y,t.rotation.z),n.scale.set(t.scale.x,t.scale.y,t.scale.z),void t.parent.remove(t)},this.loadMMM=function(t){this.par.par.par.getId(1*t.id,function(e){t.obCont=e,i.loadMod()})},this.loadMod=function(){for(var t=0;t<this.arrName.length;t++)if(null==this.arrName[t].obCont)return void this.loadMMM(this.arrName[t]);this.parsing(this.c3d),this.par.dragFilt()},this.loadMod()}else this.par.dragFilt()}function M(t){this.type="CeshGeom";var e=this;e.kolCount=9999,this.par=t;var r,i,n={};function a(t,e,r,i){r&&e.updateMatrixWorld(),i&&t.updateMatrixWorld();var n=(new THREE.Matrix4).getInverse(e.matrixWorld);t.parent&&n.multiply(t.parent.matrixWorld),t.applyMatrix(n),e.add(t)}this.set=function(t){for(var r in n={},e.fillObjMesh(t),n)n[r].length>=2&&new O(this,t,n[r])},this.sliteGeom=new w,this.groupGeometri=function(t){n={},e.fillObjMesh(t);var o=!1;for(var s in n)if(n[s].length>=2){o=!0,this.sliteGeom.start(n[s][0].geometry.clone());for(var h=n[s].length-1;h>=0;h--)a(r=n[s][h],t),this.sliteGeom.setMesh(r),r.parent.remove(r);this.sliteGeom.final(),i=new THREE.Mesh(this.sliteGeom.creatGeom,r.material),t.add(i)}o&&e.killNull(t)},e.killNull=function(t){if(t.children)for(var r=t.children.length-1;r>=0;r--)e.killNull(t.children[r]);null!=t.geometry||null==t.children||0!=t.children.length||null==t.parent||t.parent.remove(t)},e.fillObjMesh=function(t){for(var r=function t(e){var r=[];e.updateMatrixWorld();e instanceof THREE.Mesh&&r.push(e);for(var i=0;i<e.children.length;i++)for(var n=t(e.children[i]),a=0;a<n.length;a++)r.push(n[a]);return r}(t),i=0;i<r.length;i++)r[i].geometry&&r[i].geometry.index&&r[i].geometry.index.count<e.kolCount&&(n[r[i].geometry.uuid]=n[r[i].geometry.uuid]||[],n[r[i].geometry.uuid].push(r[i]))},this.moveObject=function(t,e,r,i){a(t,e,r,i)}}function O(t,e,r){this.type="LoadTime";var i,n=this;this.par=t,this.c3d=e,this.arr=r,this.mesh=r[0],this.geom=r[0].geometry,this.mate=r[0].material;var o=!0;this.initLoad=function(){o=!1,n.mate&&null!=n.mate.idObj&&0==n.mate.loadTexure&&(o=!0),0==o?setTimeout(function(){n.initLoad()},50):n.creat()},this.creat=function(){for(var t=r.length-1;t>=0;t--)i=r[t],this.par.moveObject(i,e),i.parent.remove(i);this.meshCombined=new a(r),e.add(this.meshCombined);for(this.meshCombined._meshes,t=0;t<this.meshCombined.children.length;t++)this.meshCombined.children[t].castShadow=i.castShadow,this.meshCombined.children[t].receiveShadow=i.receiveShadow,this.meshCombined.children[t].renderOrder=i.renderOrder;this.par.killNull(e)},this.initLoad()}function w(){this.type="SliteGeom";var t;this.geometry,this.kol,this.ah=[],this.sah=0,this.sahMesh=0,this.creatGeom,this.ap=[],this.ai=[],this.auv=[],this.start=function(t){this.geometry=t,this.creatGeom=new THREE.BufferGeometry,this.sah=0,this.sahMesh=0,this.ap=[],this.ai=[],this.auv=[],this.sPosit()},this.sPosit=function(){for(var t=0;t<this.geometry.index.count;t++)null==this.ah[this.sah]&&(this.ah[this.sah]=new R),this.ah[this.sah].posOld.set(this.geometry.attributes.position.array[3*this.geometry.index.array[t]],this.geometry.attributes.position.array[3*this.geometry.index.array[t]+1],this.geometry.attributes.position.array[3*this.geometry.index.array[t]+2]),this.ah[this.sah].uv.set(this.geometry.attributes.uv.array[2*this.geometry.index.array[t]],this.geometry.attributes.uv.array[2*this.geometry.index.array[t]+1]),this.ah[this.sah].index=this.geometry.index.array[t],this.sah++},this.setMesh=function(e){t=this.sahMesh*this.sah;for(var r=0;r<this.sah;r++)this.ah[r].setMesh(e),this.ap.push(this.ah[r].pos.x,this.ah[r].pos.y,this.ah[r].pos.z),this.auv.push(this.ah[r].uv.x,this.ah[r].uv.y),this.ai.push(this.ah[r].index+t);this.sahMesh++},this.final=function(){this.creatGeom.setIndex(this.ai),this.creatGeom.addAttribute("position",new THREE.BufferAttribute(new Float32Array(this.ap),3)),this.creatGeom.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(this.auv),2)),this.creatGeom.attributes.position.needsUpdate=!0,this.creatGeom.attributes.uv.needsUpdate=!0,this.creatGeom.computeVertexNormals(),this.creatGeom.attributes.normal.needsUpdate=!0,this.creatGeom.computeBoundingBox(),this.creatGeom.computeBoundingSphere()}}function R(){this.type="SliteGeom",this.pos=new THREE.Vector3,this.posOld=new THREE.Vector3,this.uv=new THREE.Vector2,this.index=0,this.setMesh=function(t){this.pos.set(this.posOld.x,this.posOld.y,this.posOld.z),this.pos.applyMatrix4(t.matrix)}}function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t,e,r){this.type="PMFilt";var i,n,a,o=this;this.par=t,this.visi3D=e,this.objbase=r,this.setHron=function(t,e){var r,i;r=t.object.iz,i=t.content3d,e&&(i=e),null!=i&&null!=r&&1==r.a&&this.setMod(i,this.strToObj(r.str),r.st)},this.strToObj=function(t){for(var e="",r=0;r<t.length;r++)"|"==t[r]?e+='"':e+=t[r];return JSON.parse(e)},this.getIz=function(t){if(i++,null!=t.iz){var e=0;null!=t.iz.renderOrder&&(0==e&&(e={}),e.renderOrder=t.iz.renderOrder),null!=t.iz.bs&&(0==e&&(e={}),e.bs=t.iz.bs),null!=t.iz.mod&&(0==e&&(e={}),e.mod=t.iz.mod),null!=t.iz.position&&(0==e&&(e={}),e.position=t.iz.position),null!=t.iz.scale&&(0==e&&(e={}),e.scale=t.iz.scale),null!=t.iz.rotation&&(0==e&&(e={}),e.rotation=t.iz.rotation),null!=t.iz.visible&&(0==e&&(e={}),e.visible=t.iz.visible),null!=t.iz.material&&(0==e&&(e={}),e.material=t.iz.material),0!=e&&(e.sah=i),n.push(e)}else n.push(0);if(t.children&&null==t.notPar)for(var r=0;r<t.children.length;r++)this.getIz(t.children[r])},this.getMod=function(t){return i=-1,n=[],this.getIz(t),n},this.setIz=function(t,e){if(a[++i]&&0!=a[i]){if(t.iz={},null!=a[i].mod){e&&(t.iz.mod=a[i].mod);for(var r=new THREE.Object3D,n=0,s=0;s<t.parent.children.length;s++)t.parent.children[s].uuid==t.uuid&&(n=s);r.notPar=!0,t.parent.add(r),t.parent.remove(t),r.parent.children.splice(r.parent.children.length-1,1),r.parent.children.splice(n,0,r),o.par.getId(a[i].mod,function(t){r.add(t)})}null!=a[i].renderOrder&&(e&&(t.iz.renderOrder=a[i].renderOrder),t.renderOrder=a[i].renderOrder),null!=a[i].bs&&(e&&(t.iz.bs=a[i].bs),t.bs=a[i].bs),null!=a[i].position&&(e&&(t.iz.position=a[i].position),t.position.set(a[i].position.x,a[i].position.y,a[i].position.z)),null!=a[i].scale&&(e&&(t.iz.scale=a[i].scale),t.scale.set(a[i].scale.x,a[i].scale.y,a[i].scale.z)),null!=a[i].rotation&&(e&&(t.iz.rotation=a[i].rotation),t.rotation.set(a[i].rotation.x,a[i].rotation.y,a[i].rotation.z)),null!=a[i].visible&&(e&&(t.iz.visible=a[i].visible),t.visible=a[i].visible),null!=a[i].material&&t.material&&(null==t.oldName&&(t.oldName=t.material.name),e&&(t.iz.material=a[i].material),t.material=o.par.mat.getIDReturn(a[i].material))}if(t.children&&null==t.notPar)for(s=0;s<t.children.length;s++)this.setIz(t.children[s])},this.setMod=function(t,e,r){"object"==S(e)&&null!=e[0]&&(a=e,i=-1,this.setIz(t,r))},this.setMat=function(t,e,r,i){if(null!=i&&(i=!0),null!=t.material&&(null==t.oldName&&(t.oldName=t.material.name),e=this.par.mat.getIDReturn(e,i),null==r?(t.material=e,null==t.iz&&(t.iz={}),t.iz.material=e.idUz):t.oldName&&-1!=t.oldName.indexOf(r)&&(t.material=e,null==t.iz&&(t.iz={}),t.iz.material=e.idUz)),t.children&&null==t.notPar)for(var n=0;n<t.children.length;n++)this.setMat(t.children[n],e,r,i)}}function C(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}THREE.ShaderChunk.begin_vertex=m,THREE.ShaderChunk.color_fragment=y,THREE.ShaderChunk.color_pars_fragment=b,THREE.ShaderChunk.color_vertex=v,THREE.ShaderChunk.defaultnormal_vertex=g,THREE.ShaderChunk.uv_pars_vertex=x;var H=function(){function t(e,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type="PMTexture",this.par=e,this.param=this.par.param,this.nameType="textures",this.visi3D=r,this.objbase=i,this.loader=new THREE.TextureLoader,this.textureCache={},window.textureCache=this.textureCache}var e,r,i;return e=t,(r=[{key:"getById",value:function(t,e){var r=this;if(this.textureCache[t]&&this.textureCache[t].loaded)return e&&setTimeout(function(){return e(r.textureCache[t].texture)},0),this.textureCache[t].texture;var i=this.getObj(t);return this.loadTexture(i,e)}},{key:"loadTexture",value:function(t,e){var r=this;if(this.textureCache[t.id]&&this.textureCache[t.id].callbacks||(this.textureCache[t.id]={callbacks:[]}),!this.textureCache[t.id].texture){var i="data:image/png;base64,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";t.obj&&t.obj.res&&(i=t.obj.res.src);var n=this.loader.load(i,function(e){r.visi3D&&(r.visi3D.intRend=1),e.obj={},r.textureCache[t.id].callbacks.forEach(function(t){return t(e)}),delete r.textureCache[t.id].callbacks,r.textureCache[t.id].loaded=!0});n.arrMat=[],n.arrRun=[],n.wrapS=n.wrapT=THREE.RepeatWrapping,t.obj&&t.obj.res&&(n.repeat.x=t.obj.rx,n.repeat.y=t.obj.ry),this.textureCache[t.id].texture=n}return e&&this.textureCache[t.id].callbacks.push(e),this.textureCache[t.id].texture}},{key:"updateTexture",value:function(t,e){var r=this;if(trace("updateTexture",t,e),this.textureCache[t.id])if(e){var i=new Image,n=window.location.href.split("/");n.pop(),i.src=n.join("/")+"/resources/data/"+t.id+"/pic."+t.type,i.crossOrigin=null,this.textureCache[t.id].texture.image=i,this.textureCache[t.id].loaded=!1,i.onload=function(){delete r.textureCache[t.id].callbacks,r.textureCache[t.id].loaded=!0,r.textureCache[t.id].texture.needsUpdate=!0}}else this.textureCache[t.id].texture.repeat.x=t.rx,this.textureCache[t.id].texture.repeat.y=t.ry}},{key:"getObj",value:function(t){for(var e=0;e<this.param[this.nameType].length;e++)if(t==this.param[this.nameType][e].id){var r=void 0;return r="string"==typeof this.param[this.nameType][e].json?JSON.parse(this.param[this.nameType][e].json):this.param[this.nameType][e].json,this.param[this.nameType][e].obj=r,this.param[this.nameType][e]}return null}}])&&C(e.prototype,r),i&&C(e,i),t}();function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(t,e,r){this.type="PM";this.objbase=e,this.visi3D=t,this.param=r,this.plus="?1",this.loaderGLTF=new THREE.GLTFLoader,this.tex=new H(this,t,e),this.mat=new i.a(this,t,e),this.filt=new A(this,t,e),this.iz=new I(this,t,e),this.matDop=new n(this,t,e),this.arrayHron=[],this.getId=function(t,e,r){if(1==r)for(var i=0;i<this.arrayHron.length;i++)1==this.arrayHron[i].testId(t)&&this.arrayHron.splice(i,1);for(i=0;i<this.arrayHron.length;i++)if(1==this.arrayHron[i].testId(t))return void this.arrayHron[i].setFun(e);this.arrayHron.push(new P(this,t,e))},this.clear=function(){}}function P(t,e,r){this.type="Hron";var i,n,a=this;if(this.par=t,this.idObj=e,this.id=void 0,this.object=void 0,this.link=void 0,this.filt=void 0,this.content3d=void 0,this.param=this.par.param,this.nameType=this.param.arrayName[0],this.objBig=void 0,this.array=[],this.array.push(r),this.boolClone=!0,this.setFun=function(t){if(null!=this.content3d)return(i=1==a.boolClone?a.content3d.clone():a.content3d).hron=this,this.par.iz.setHron(this,i),this.object.param&&this.par.filt.dragParam(i,this.object.param),this.par.iz.setHron(this,i),void t(i);this.array.push(t)},this.finalLoad=function(t){this.getObj3D(t),this.content3d=t,t.name="hron_"+this.id,this.par.mat.setObjS(this.content3d,this.object,this.finalLoad1)},this.finalLoad1=function(){a.par.filt.setObjS(a,a.finalLoad2)},this.finalLoad2=function(){for(var t=0;t<a.array.length;t++)(i=1==a.boolClone?a.content3d.clone():a.content3d).hron=a,a.par.iz.setHron(a,i),a.object.param&&a.par.filt.dragParam(i,a.object.param),a.par.iz.setHron(a,i),a.array[t](i)},this.loadObject=function(){},this.start=function(){if(null==this.object&&(this.object={}),null==this.object&&(this.object={}),null==this.object.res)this.finalLoad(new THREE.Mesh(new THREE.BoxBufferGeometry(100,100,100)));else{var t=this.object.res.src.replace("http://","https://");this.par.loaderGLTF.load(t,function(t){a.finalLoad(t.scene)})}},this.testId=function(t){return n="number"==typeof t?t:t.id,(null==this.id?this.idObj.id:this.id)==n},this.getObj3D=function(e){if(null!=e.material&&null!=e.material.roughnessMap&&t.visi3D&&(e.material.envMap=t.visi3D.cubeMap.getTexture()),null!=e){if(null!=e.children)for(var r=e.children.length-1;r>=0;r--)this.getObj3D(e.children[r]);"Default_light"==e.name&&e.parent.remove(e)}},"object"==B(e))return a.object=e,void this.start(e);"number"==typeof e&&(this.id=e);for(var o=null,s=0;s<this.param[this.nameType].length;s++)if(this.param[this.nameType][s].id==this.id){this.param[this.nameType][s].json&&(o="string"==typeof this.param[this.nameType][s].json?JSON.parse(this.param[this.nameType][s].json):this.param[this.nameType][s].json);break}if(null!=o)return a.object=o,void a.start();var h={type:"GET"};h.url=this.param.server+this.nameType+"/"+e+"/",h.success=function(t){a.objBig=t,"string"==typeof t.json?a.object=JSON.parse(t.json):a.object=t.json,a.start()},$.ajax(h)}r.d(e,"a",function(){return N})},function(module,__webpack_exports__,__webpack_require__){"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function PMMat(par,visi3D,objbase){this.type="PMMat";var self=this;this.par=par,this.visi3D=visi3D,this.objbase=objbase,this.pmTexture=this.par.tex,this.ser=window.location.href;var arrParams=window.location.href.split("?"),arrParams2=arrParams[0].split("/");this.param=this.par.param,this.nameType="materials",this.matError=new THREE.MeshBasicMaterial({color:16711680}),this.server="";for(var i=0;i<arrParams2.length-1;i++)this.server+=arrParams2[i]+"/";this.setObjS=function(t,e,r){this.getTestTitleObj(t),r()},this.testObjMatLoad=function(t){if(t.children)for(var e=0;e<t.children.length;e++)if(0==this.testObjMatLoad(t.children[e]))return!1;return!t.material||null==t.material.bLoad||0!=t.material.bLoad},this.matarialArray=this.param[this.nameType];var matarialArray=this.matarialArray;this.idColor=null;var loader=new THREE.TextureLoader,rt,textur;this.obj={},this.getTestTitle=function(t){var e=null;if(null!=t)for(var r=0;r<matarialArray.length;r++)if(matarialArray[r].title){if(-1!=t.indexOf(matarialArray[r].title))return e=this.getIDReturn(matarialArray[r].id)}else if(matarialArray[r].json&&matarialArray[r].json.title&&-1!=t.indexOf(matarialArray[r].json.title))return e=this.getIDReturn(matarialArray[r].id);return e},this.getTestTitleObj=function(t){t.material&&null!=(rt=this.getTestTitle(t.material.name))&&(t.material=rt);for(var e=0;e<t.children.length;e++)this.getTestTitleObj(t.children[e])},this.getIDReturn=function(id,isBD){for(var r=null,p=-1,i=0;i<this.param.materials.length;i++)this.param.materials[i].id==id&&(p=i);if(-1==p)return this.matError;var ooo=this.param.materials[p].json;if(null==isBD&&null!=this.obj[id])return this.obj[id];var comand="new THREE."+ooo.obj.type+"()",m=eval(comand);return m.idObj=matarialArray[p],this.startMat(m,id),this.obj[id]=m,m.idUz=id,m},this.get=function(t,e,r){var i,n,a=-1;if(null!=r){i=t+"",t="2456567567867896789";for(var o=0;o<this.matarialArray.length;o++)if(n=this.matarialArray[o].title+"",-1!=i.indexOf(n)){t=this.matarialArray[o].title;break}}for(o=0;o<this.matarialArray.length;o++)this.matarialArray[o].title==t&&(a=o);-1!=a?this.getId(this.matarialArray[a].id,e):e(null)},this.getId=function(id,_fun){for(var p=-1,i=0;i<this.matarialArray.length;i++)if(this.matarialArray[i].id==id){p=i;break}if(-1!=p){if(null!=this.obj[id])return 1==this.obj[id].bLoad?_fun(this.obj[id]):this.obj[id].arrFun.push(_fun),this.obj[id];var comand="new THREE."+this.matarialArray[p].key+"()",m=eval(comand);return m.idObj=matarialArray[p],m.bLoad=!1,m.loadTexure=999,m.arrFun=[_fun],this.startMat(m,id),this.obj[id]=m,m}_fun(null)},this.objToMater=function(t,e){var r=this;for(var i in t)null!=e[i]&&(e[i]instanceof THREE.Color?e[i]=new THREE.Color(t[i]):e[i]=t[i]);if(e.loadTexure=0,t.textur&&"object"===_typeof(t.textur)){e.loadTexure=t.textur.length;for(var n=0;n<t.textur.length;n++)if(t.textur[n].id)!function(){var i=n;textur=r.pmTexture.getById(t.textur[n].id,function(r){e[t.textur[i].name]=r,--e.loadTexure}),e[t.textur[n].name]=textur}();else{var a=t.textur[n].res.src.replace("http://","https://");(textur=loader.load(a,function(t){self.visi3D&&(self.visi3D.intRend=1),e.loadTexure--})).wrapS=textur.wrapT=THREE.RepeatWrapping,textur.repeat.x=t.textur[n].rx,textur.repeat.y=t.textur[n].ry,e[t.textur[n].name]=textur}}if(e.needsUpdate=!0,e.bLoad=!0,e.arrFun)for(n=0;n<e.arrFun.length;n++)e.arrFun[n](e)},this.startMat=function(t,e){for(var r=null,i=0;i<this.matarialArray.length;i++)if(this.matarialArray[i].id==e){this.matarialArray[i].json&&(r="string"==typeof this.matarialArray[i].json?JSON.parse(this.matarialArray[i].json):this.matarialArray[i].json);break}if(null==r){this.server,self.par.plus;var n,a={type:"GET"};a.url=this.param.server+this.nameType+"/"+e+"/",a.success=function(e){n="string"==typeof e.json?JSON.parse(e.json):e.json,self.startMat2(n,t)},$.ajax(a)}else self.startMat2(r,t)},this.startMat2=function(t,e){t||((t={}).mirro=0,t.obj={}),!0===t.mirro?self.visi3D&&(e.envMap=self.visi3D.getEnvMap()):(t.mirro,1==t.mirro&&self.visi3D&&(e.envMap=self.visi3D.getEnvMap()),2==t.mirro&&self.visi3D&&(e.envMap=self.visi3D.getEnvMap1())),self.objToMater(t.obj,e)}}__webpack_require__.d(__webpack_exports__,"a",function(){return PMMat})},function(t,e,r){"use strict";r.r(e),function(t){var i=r(0);r.d(e,"PM",function(){return i.a}),t.PM=i.a}.call(this,r(3))},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r}]);