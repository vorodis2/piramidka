!function(t){var e=window.webpackHotUpdate;window.webpackHotUpdate=function(t,i){!function(t,e){if(!E[t]||!x[t])return;for(var i in x[t]=!1,e)Object.prototype.hasOwnProperty.call(e,i)&&(m[i]=e[i]);0==--b&&0===v&&w()}(t,i),e&&e(t,i)};var i,r=!0,n="87e625477e73f8eb461f",a=1e4,o={},s=[],h=[];function c(t){var e=_[t];if(!e)return A;var r=function(r){return e.hot.active?(_[r]?-1===_[r].parents.indexOf(t)&&_[r].parents.push(t):(s=[t],i=r),-1===e.children.indexOf(r)&&e.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+t),s=[]),A(r)},n=function(t){return{configurable:!0,enumerable:!0,get:function(){return A[t]},set:function(e){A[t]=e}}};for(var a in A)Object.prototype.hasOwnProperty.call(A,a)&&"e"!==a&&"t"!==a&&Object.defineProperty(r,a,n(a));return r.e=function(t){return"ready"===d&&f("prepare"),v++,A.e(t).then(e,function(t){throw e(),t});function e(){v--,"prepare"===d&&(g[t]||j(t),0===v&&0===b&&w())}},r.t=function(t,e){return 1&e&&(t=r(t)),A.t(t,-2&e)},r}function l(t){var e={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:i!==t,active:!0,accept:function(t,i){if(void 0===t)e._selfAccepted=!0;else if("function"==typeof t)e._selfAccepted=t;else if("object"==typeof t)for(var r=0;r<t.length;r++)e._acceptedDependencies[t[r]]=i||function(){};else e._acceptedDependencies[t]=i||function(){}},decline:function(t){if(void 0===t)e._selfDeclined=!0;else if("object"==typeof t)for(var i=0;i<t.length;i++)e._declinedDependencies[t[i]]=!0;else e._declinedDependencies[t]=!0},dispose:function(t){e._disposeHandlers.push(t)},addDisposeHandler:function(t){e._disposeHandlers.push(t)},removeDisposeHandler:function(t){var i=e._disposeHandlers.indexOf(t);i>=0&&e._disposeHandlers.splice(i,1)},check:M,apply:O,status:function(t){if(!t)return d;u.push(t)},addStatusHandler:function(t){u.push(t)},removeStatusHandler:function(t){var e=u.indexOf(t);e>=0&&u.splice(e,1)},data:o[t]};return i=void 0,e}var u=[],d="idle";function f(t){d=t;for(var e=0;e<u.length;e++)u[e].call(null,t)}var p,m,y,b=0,v=0,g={},x={},E={};function T(t){return+t+""===t?+t:t}function M(t){if("idle"!==d)throw new Error("check() is only allowed in idle status");return r=t,f("check"),(e=a,e=e||1e4,new Promise(function(t,i){if("undefined"==typeof XMLHttpRequest)return i(new Error("No browser support"));try{var r=new XMLHttpRequest,n=A.p+"hot-update/hot-update.json";r.open("GET",n,!0),r.timeout=e,r.send(null)}catch(t){return i(t)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)i(new Error("Manifest request to "+n+" timed out."));else if(404===r.status)t();else if(200!==r.status&&304!==r.status)i(new Error("Manifest request to "+n+" failed."));else{try{var e=JSON.parse(r.responseText)}catch(t){return void i(t)}t(e)}}})).then(function(t){if(!t)return f("idle"),null;x={},g={},E=t.c,y=t.h,f("prepare");var e=new Promise(function(t,e){p={resolve:t,reject:e}});m={};return j(0),"prepare"===d&&0===v&&0===b&&w(),e});var e}function j(t){var e;E[t]?(x[t]=!0,b++,(e=document.createElement("script")).charset="utf-8",e.src=A.p+"hot-update/hot-update.js",document.head.appendChild(e)):g[t]=!0}function w(){f("ready");var t=p;if(p=null,t)if(r)Promise.resolve().then(function(){return O(r)}).then(function(e){t.resolve(e)},function(e){t.reject(e)});else{var e=[];for(var i in m)Object.prototype.hasOwnProperty.call(m,i)&&e.push(T(i));t.resolve(e)}}function O(e){if("ready"!==d)throw new Error("apply() is only allowed in ready status");var i,r,a,h,c;function l(t){for(var e=[t],i={},r=e.slice().map(function(t){return{chain:[t],id:t}});r.length>0;){var n=r.pop(),a=n.id,o=n.chain;if((h=_[a])&&!h.hot._selfAccepted){if(h.hot._selfDeclined)return{type:"self-declined",chain:o,moduleId:a};if(h.hot._main)return{type:"unaccepted",chain:o,moduleId:a};for(var s=0;s<h.parents.length;s++){var c=h.parents[s],l=_[c];if(l){if(l.hot._declinedDependencies[a])return{type:"declined",chain:o.concat([c]),moduleId:a,parentId:c};-1===e.indexOf(c)&&(l.hot._acceptedDependencies[a]?(i[c]||(i[c]=[]),u(i[c],[a])):(delete i[c],e.push(c),r.push({chain:o.concat([c]),id:c})))}}}}return{type:"accepted",moduleId:t,outdatedModules:e,outdatedDependencies:i}}function u(t,e){for(var i=0;i<e.length;i++){var r=e[i];-1===t.indexOf(r)&&t.push(r)}}e=e||{};var p={},b=[],v={},g=function(){console.warn("[HMR] unexpected require("+M.moduleId+") to disposed module")};for(var x in m)if(Object.prototype.hasOwnProperty.call(m,x)){var M;c=T(x);var j=!1,w=!1,O=!1,S="";switch((M=m[x]?l(c):{type:"disposed",moduleId:x}).chain&&(S="\nUpdate propagation: "+M.chain.join(" -> ")),M.type){case"self-declined":e.onDeclined&&e.onDeclined(M),e.ignoreDeclined||(j=new Error("Aborted because of self decline: "+M.moduleId+S));break;case"declined":e.onDeclined&&e.onDeclined(M),e.ignoreDeclined||(j=new Error("Aborted because of declined dependency: "+M.moduleId+" in "+M.parentId+S));break;case"unaccepted":e.onUnaccepted&&e.onUnaccepted(M),e.ignoreUnaccepted||(j=new Error("Aborted because "+c+" is not accepted"+S));break;case"accepted":e.onAccepted&&e.onAccepted(M),w=!0;break;case"disposed":e.onDisposed&&e.onDisposed(M),O=!0;break;default:throw new Error("Unexception type "+M.type)}if(j)return f("abort"),Promise.reject(j);if(w)for(c in v[c]=m[c],u(b,M.outdatedModules),M.outdatedDependencies)Object.prototype.hasOwnProperty.call(M.outdatedDependencies,c)&&(p[c]||(p[c]=[]),u(p[c],M.outdatedDependencies[c]));O&&(u(b,[M.moduleId]),v[c]=g)}var R,I=[];for(r=0;r<b.length;r++)c=b[r],_[c]&&_[c].hot._selfAccepted&&I.push({module:c,errorHandler:_[c].hot._selfAccepted});f("dispose"),Object.keys(E).forEach(function(t){!1===E[t]&&function(t){delete installedChunks[t]}(t)});for(var H,C,z=b.slice();z.length>0;)if(c=z.pop(),h=_[c]){var P={},N=h.hot._disposeHandlers;for(a=0;a<N.length;a++)(i=N[a])(P);for(o[c]=P,h.hot.active=!1,delete _[c],delete p[c],a=0;a<h.children.length;a++){var B=_[h.children[a]];B&&((R=B.parents.indexOf(c))>=0&&B.parents.splice(R,1))}}for(c in p)if(Object.prototype.hasOwnProperty.call(p,c)&&(h=_[c]))for(C=p[c],a=0;a<C.length;a++)H=C[a],(R=h.children.indexOf(H))>=0&&h.children.splice(R,1);for(c in f("apply"),n=y,v)Object.prototype.hasOwnProperty.call(v,c)&&(t[c]=v[c]);var D=null;for(c in p)if(Object.prototype.hasOwnProperty.call(p,c)&&(h=_[c])){C=p[c];var k=[];for(r=0;r<C.length;r++)if(H=C[r],i=h.hot._acceptedDependencies[H]){if(-1!==k.indexOf(i))continue;k.push(i)}for(r=0;r<k.length;r++){i=k[r];try{i(C)}catch(t){e.onErrored&&e.onErrored({type:"accept-errored",moduleId:c,dependencyId:C[r],error:t}),e.ignoreErrored||D||(D=t)}}}for(r=0;r<I.length;r++){var G=I[r];c=G.module,s=[c];try{A(c)}catch(t){if("function"==typeof G.errorHandler)try{G.errorHandler(t)}catch(i){e.onErrored&&e.onErrored({type:"self-accept-error-handler-errored",moduleId:c,error:i,originalError:t}),e.ignoreErrored||D||(D=i),D||(D=t)}else e.onErrored&&e.onErrored({type:"self-accept-errored",moduleId:c,error:t}),e.ignoreErrored||D||(D=t)}}return D?(f("fail"),Promise.reject(D)):(f("idle"),new Promise(function(t){t(b)}))}var _={};function A(e){if(_[e])return _[e].exports;var i=_[e]={i:e,l:!1,exports:{},hot:l(e),parents:(h=s,s=[],h),children:[]};return t[e].call(i.exports,i,i.exports,c(e)),i.l=!0,i.exports}A.m=t,A.c=_,A.d=function(t,e,i){A.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},A.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},A.t=function(t,e){if(1&e&&(t=A(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(A.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)A.d(i,r,function(e){return t[e]}.bind(null,r));return i},A.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return A.d(e,"a",e),e},A.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},A.p="src/pm/",A.h=function(){return n},c(2)(A.s=2)}([function(t,e,i){"use strict";var r=i(1);function n(t){THREE.Group.call(this),this.type="MeshCombined",this._meshes=t,this._ready=!1,this.init()}n.prototype=Object.create(THREE.Group.prototype),n.constructor=n,Object.defineProperties(n.prototype,{}),n.prototype.canAnalyze=function(){return this._meshes.reduce(function(t,e){return t&&e.geometry},!0)},n.prototype._getMaterialKey=function(t){return t.material.uuid},n.prototype.init=function(){var t=this;if(this._ready||!this.canAnalyze)return!1;var e=[],i={};return this._meshes.forEach(function(t){var e=t.geometry.uuid;i[e]||(i[e]=[]),i[e].push(t)}),Object.keys(i).forEach(function(r){var n=i[r],a=n[0].geometry;if(1!==n.length){var o={};n.forEach(function(e){var i=t._getMaterialKey(e);o[i]||(o[i]=[]),o[i].push(e)}),Object.keys(o).forEach(function(t){var i=o[t],r=i[0].material,n=i.length,s=new THREE.InstancedMesh(a,r.clone(),n);e.push(s),i.forEach(function(t,e){s.setQuaternionAt(e,t.quaternion),s.setPositionAt(e,t.position),s.setScaleAt(e,t.scale)}),s.needsUpdate()})}else e.push(n[0])}),e.forEach(function(e){return t.add(e)}),!0};var a=new THREE.MeshDepthMaterial;a.depthPacking=THREE.RGBADepthPacking,a.clipping=!0,a.defines={INSTANCE_TRANSFORM:""};var o=THREE.ShaderLib.distanceRGBA,s=THREE.UniformsUtils.clone(o.uniforms),h=new THREE.ShaderMaterial({defines:{USE_SHADOWMAP:"",INSTANCE_TRANSFORM:""},uniforms:s,vertexShader:o.vertexShader,fragmentShader:o.fragmentShader,clipping:!0});THREE.InstancedMesh=function(t,e,i){THREE.Mesh.call(this,(new l).setGeometry(t),e);var r=this;this.type="InstancedMesh",this.numInstances=i||1,this.customDepthMaterial=a,this.customDistanceMaterial=h,this.onAfterRender=function(t,e,i,n,a,o){r.geometry.update(i)}},THREE.InstancedMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.InstancedMesh.constructor=THREE.InstancedMesh,Object.defineProperties(THREE.InstancedMesh.prototype,{material:{set:function(t){this._material=t,this._material.defines=this._material.defines||{},this._material.defines.INSTANCE_TRANSFORM="",this._material.needsUpdate=!0},get:function(){return this._material}},geometry:{set:function(t){t instanceof l?this._geometry=t:this._geometry.setGeometry(t)},get:function(){return this._geometry}},numInstances:{set:function(t){this._numInstances=t,this.geometry.setCount(this.numInstances)},get:function(){return this._numInstances}}}),THREE.InstancedMesh.prototype.setPositionAt=function(t,e){this.geometry.setPositionAt(t,e)},THREE.InstancedMesh.prototype.setQuaternionAt=function(t,e){this.geometry.setQuaternionAt(t,e)},THREE.InstancedMesh.prototype.setScaleAt=function(t,e){this.geometry.setScaleAt(t,e)},THREE.InstancedMesh.prototype.getPositionAt=function(t,e){return this.geometry.getPositionAt(t,e)},THREE.InstancedMesh.prototype.getQuaternionAt=function(t,e){return this.geometry.getQuaternionAt(t,e)},THREE.InstancedMesh.prototype.getScaleAt=function(t,e){return this.geometry.getScaleAt(t,e)},THREE.InstancedMesh.prototype.needsUpdate=function(){this.geometry.needsUpdate=!0,this.geometry.computeBoundingSphere()};var c;new THREE.BoxBufferGeometry(1,1,1),new THREE.MeshNormalMaterial({wireframe:!0});function l(){THREE.InstancedBufferGeometry.call(this),this.count=0;var t=this;this.boundOrigin=new THREE.Box3,this.arrTransform=[],this.gridTransform=new d(this.arrTransform),this.setCount=function(t){if(this.count=t,(this.maxInstancedCount||0)<t&&(!this.attributes.instanceQuaternion||this.attributes.instanceQuaternion.count<t)){var e={instanceQuaternion:new Float32Array(4*t),instancePosition:new Float32Array(3*t),instanceScale:new Float32Array(3*t)};this.setAttribute("instanceQuaternion",new THREE.InstancedBufferAttribute(e.instanceQuaternion,4)),this.setAttribute("instancePosition",new THREE.InstancedBufferAttribute(e.instancePosition,3)),this.setAttribute("instanceScale",new THREE.InstancedBufferAttribute(e.instanceScale,3)),this.needsUpdate=!0}for(var i=0;i<t;i++)this.arrTransform[i]=new u(this.boundOrigin);this.maxInstancedCount=t},this.setGeometry=function(t){return this.copy(t),this.boundOrigin.setFromBufferAttribute(this.attributes.position),this};var e=new THREE.Frustum,i=new THREE.Matrix4;this.arrTransformVisible=[],this.update=function(r){i.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),e.setFromMatrix(i);var n=0;this.arrTransformVisible=[];for(var a=0;a<this.gridTransform.arrGridIndex.length;a++){var o=this.gridTransform.arrGridIndex[a];if(e.intersectsBox(o.boundingBox))for(var s=0;s<o.arrTransform.length;s++){var h=o.arrTransform[s];this.arrTransformVisible.push(h),this.setTransformAt(n++,h)}}t.maxInstancedCount=n,t.needsUpdate=!0},this.updateGrid=function(){this.gridTransform.updateGrid()}}function u(t){this.boundOrigin=t,this._boundingBox=null,this.p=new THREE.Vector3,this.s=new THREE.Vector3(1,1,1),this.q=new THREE.Quaternion,this.setP=function(t){this.p.copy(t)},this.setS=function(t){this.s.copy(t)},this.setQ=function(t){this.q.copy(t)}}function d(t){var e=this;this.arrTransform=t;var i=100;function r(t){var r="x"+Math.floor(t.x/i)+"y"+Math.floor(t.y/i)+"z"+Math.floor(t.z/i);return e.cache[r]||(e.cache[r]=new f),e.cache[r]}this.arrGridIndex=[],this.cache={},this.updateGrid=function(){this.arrGridIndex.length=0,this.cache={};for(var t=0;t<this.arrTransform.length;t++){var e=this.arrTransform[t];r(e.p).arrTransform.push(e)}for(var i in this.cache)this.cache[i].computeBoundingBox(),this.arrGridIndex.push(this.cache[i])}}function f(){this.arrTransform=[],this._boundingBox=null}l.prototype=Object.create(THREE.InstancedBufferGeometry.prototype),l.constructor=l,l.prototype.setTransformAt=function(t,e){this.attributes.instanceScale.setXYZ(t,e.s.x,e.s.y,e.s.z),this.attributes.instancePosition.setXYZ(t,e.p.x,e.p.y,e.p.z),this.attributes.instanceQuaternion.setXYZW(t,e.q.x,e.q.y,e.q.z,e.q.w)},l.prototype.setPositionAt=function(t,e){this.arrTransform[t].setP(e),this.setTransformAt(t,this.arrTransform[t])},l.prototype.setQuaternionAt=function(t,e){this.arrTransform[t].setQ(e),this.setTransformAt(t,this.arrTransform[t])},l.prototype.setScaleAt=function(t,e){this.arrTransform[t].setS(e),this.setTransformAt(t,this.arrTransform[t])},l.prototype.getPositionAt=function(t,e){return e?e.copy(this.arrTransform[t].p):this.arrTransform[t].p},l.prototype.getQuaternionAt=function(t,e){return e?e.copy(this.arrTransform[t].q):this.arrTransform[t].q},l.prototype.getScaleAt=function(t,e){return e?e.copy(this.arrTransform[t].s):this.arrTransform[t].s},l.prototype.computeBoundingSphere=function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere),this.computeBoundingBox(),this.boundingBox.getBoundingSphere(this.boundingSphere),this.updateGrid()},l.prototype.computeBoundingBox=function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3),this.boundingBox.makeEmpty();for(var t=0,e=this.count;t<e;t++)this.boundingBox.union(this.getBoundingBoxAt(t))},l.prototype.getBoundingBoxAt=function(t){return this.arrTransform[t].boundingBox},Object.defineProperties(l.prototype,{needsUpdate:{set:function(t){this.attributes.instancePosition.needsUpdate=t,this.attributes.instanceQuaternion.needsUpdate=t,this.attributes.instanceScale.needsUpdate=t},get:function(){return!1}}}),u.prototype.computeBoundingBox=(c=new THREE.Matrix4,function(){return this._boundingBox||(this._boundingBox=new THREE.Box3),c.compose(this.p,this.q,this.s),this.boundingBox.copy(this.boundOrigin),this.boundingBox.applyMatrix4(c),this.boundingBox}),Object.defineProperties(u.prototype,{boundingBox:{set:function(t){this._boundingBox=t},get:function(){return this._boundingBox||this.computeBoundingBox()}}}),f.prototype.computeBoundingBox=function(){this._boundingBox||(this._boundingBox=new THREE.Box3),this.boundingBox.makeEmpty();for(var t=0,e=this.arrTransform.length;t<e;t++)this.boundingBox.union(this.arrTransform[t].boundingBox);return this.boundingBox},Object.defineProperties(f.prototype,{boundingBox:{set:function(t){this._boundingBox=t},get:function(){return this._boundingBox||this.computeBoundingBox()}}});var p=["#ifndef INSTANCE_TRANSFORM","vec3 transformed = vec3( position );","#else","#ifndef INSTANCE_MATRIX","mat4 _instanceMatrix = getInstanceMatrix();","#define INSTANCE_MATRIX","#endif","vec3 transformed = ( _instanceMatrix * vec4( position , 1. )).xyz;","#endif"].join("\n"),m=["#ifdef USE_COLOR","diffuseColor.rgb *= vColor;","#endif","#if defined(INSTANCE_COLOR)","diffuseColor.rgb *= vInstanceColor;","#endif"].join("\n"),y=["#ifdef USE_COLOR","varying vec3 vColor;","#endif","#if defined( INSTANCE_COLOR )","varying vec3 vInstanceColor;","#endif"].join("\n"),b=["#ifdef USE_COLOR","vColor.xyz = color.xyz;","#endif","#if defined( INSTANCE_COLOR ) && defined( INSTANCE_TRANSFORM )","vInstanceColor = instanceColor;","#endif"].join("\n"),v=["#ifdef FLIP_SIDED","objectNormal = -objectNormal;","#endif","#ifndef INSTANCE_TRANSFORM","vec3 transformedNormal = normalMatrix * objectNormal;","#else","#ifndef INSTANCE_MATRIX ","mat4 _instanceMatrix = getInstanceMatrix();","#define INSTANCE_MATRIX","#endif","#ifndef INSTANCE_UNIFORM","vec3 transformedNormal =  transposeMat3( inverse( mat3( modelViewMatrix * _instanceMatrix ) ) ) * objectNormal ;","#else","vec3 transformedNormal = ( modelViewMatrix * _instanceMatrix * vec4( objectNormal , 0.0 ) ).xyz;","#endif","#endif"].join("\n"),g=["#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )","varying vec2 vUv;","uniform mat3 uvTransform;","#endif","#ifdef INSTANCE_TRANSFORM","mat3 inverse(mat3 m) {","float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];","float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];","float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];","float b01 = a22 * a11 - a12 * a21;","float b11 = -a22 * a10 + a12 * a20;","float b21 = a21 * a10 - a11 * a20;","float det = a00 * b01 + a01 * b11 + a02 * b21;","return mat3(b01, (-a22 * a01 + a02 * a21), ( a12 * a01 - a02 * a11),","b11, ( a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10),","b21, (-a21 * a00 + a01 * a20), ( a11 * a00 - a01 * a10)) / det;","}","attribute vec3 instancePosition;","attribute vec4 instanceQuaternion;","attribute vec3 instanceScale;","#if defined( INSTANCE_COLOR )","attribute vec3 instanceColor;","varying vec3 vInstanceColor;","#endif","mat4 getInstanceMatrix(){","vec4 q = instanceQuaternion;","vec3 s = instanceScale;","vec3 v = instancePosition;","vec3 q2 = q.xyz + q.xyz;","vec3 a = q.xxx * q2.xyz;","vec3 b = q.yyz * q2.yzz;","vec3 c = q.www * q2.xyz;","vec3 r0 = vec3( 1.0 - (b.x + b.z) , a.y + c.z , a.z - c.y ) * s.xxx;","vec3 r1 = vec3( a.y - c.z , 1.0 - (a.x + b.z) , b.y + c.x ) * s.yyy;","vec3 r2 = vec3( a.z + c.y , b.y - c.x , 1.0 - (a.x + b.x) ) * s.zzz;","return mat4(","r0 , 0.0,","r1 , 0.0,","r2 , 0.0,","v  , 1.0",");","}","#endif"].join("\n");function x(t,e,i){this.type="PMFilt";var r=this;this.par=t,this.visi3D=e,this.objbase=i,this.ceshGeom=new j(this),this.setObjS=function(t,e){!0,t.object.filt&&0!=t.object.filt.length?new E(this,t,e):this.finalObjS(t,e)},this.finalObjS=function(t,e){t.object.param&&(1==t.object.param.kesh&&r.ceshGeom.set(t.content3d),null!=t.object.param.sG&&1==t.object.param.sG&&r.ceshGeom.groupGeometri(t.content3d)),e()},this.dragParam=function(t,e){if(t.children)for(var i=t.children.length-1;i>=0;i--)this.dragParam(t.children[i],e);null==t.bs&&(t.castShadow=e.tOt,t.receiveShadow=e.tNa);var r=e.rO;t.iz&&t.iz.renderOrder&&(r=t.iz.renderOrder),t.renderOrder=r},this.dragPozition=function(t){var e=!1;t.object&&t.object.psm&&(e=!0,null!=t.object.psm.active&&0==t.object.psm.active&&(e=!1)),1==e?(t.content3d.position.set(t.object.psm.p[0],t.object.psm.p[1],t.object.psm.p[2]),t.content3d.rotation.set(t.object.psm.r[0],t.object.psm.r[1],t.object.psm.r[2]),t.content3d.scale.set(t.object.psm.s[0],t.object.psm.s[1],t.object.psm.s[2])):(t.content3d.position.set(0,0,0),t.content3d.rotation.set(0,0,0),t.content3d.scale.set(1,1,1))}}function E(t,e,i){this.type="StartFilt";this.par=t,this.hron=e,this.fun=i,this.hron.filt=this,this.array=[];var r,n=0;this.dragFilt=function(){n!=this.hron.object.filt.length?(r=this.hron.object.filt[n].type,n++,"mark"==r&&this.array.push(new M(this,this.hron.object.filt[n-1],this.array.length)),"material"==r&&this.array.push(new T(this,this.hron.object.filt[n-1],this.array.length))):this.par.finalObjS(this.hron,this.fun)},this.dragFilt()}function T(t,e,i){this.type="PMMaterial";this.par=t,this.obj=e,this.idArr=i,this.mat=this.par.par.par.mat.getTestTitle(e.id),null!=this.mat?(this.parsing=function(t){if(t.children)for(var e=t.children.length-1;e>=0;e--)this.parsing(t.children[e]);null!=t.material&&(t.material=this.mat)},this.parsing(t.hron.content3d),this.par.dragFilt()):this.par.dragFilt()}function M(t,e,i){this.type="PMMark";var r=this;if(this.par=t,this.obj=e,this.idArr=i,this.idKey=e.id,this.c3d=t.hron.content3d,this.arrName=[],this.arrayObj=[],"null"!=this.idKey){var n,a=!0;if(-1!=e.id.indexOf("|")){for(var o=e.id.split("|"),s=o[0].split(","),h=o[1].split(","),c=0;c<s.length;c++)this.arrName[c]={name:s[c],id:1*h[c],obCont:null};a=!1}else a=!0,this.arrName[0]={name:"null",id:e.id,obCont:null};this.parsing=function(t){if(t.children)for(var e=t.children.length-1;e>=0;e--)this.parsing(t.children[e]);if("Mesh"==t.type)if(a)n=this.arrName[0].obCont.clone(),t.parent.add(n),n.position.set(t.position.x,t.position.y,t.position.z),n.rotation.set(t.rotation.x,t.rotation.y,t.rotation.z),n.scale.set(t.scale.x,t.scale.y,t.scale.z),t.parent.remove(t);else if(t.name)for(e=this.arrName.length-1;e>=0;e--)if(-1!=t.name.indexOf(this.arrName[e].name))return n=this.arrName[e].obCont.clone(),t.parent.add(n),n.position.set(t.position.x,t.position.y,t.position.z),n.rotation.set(t.rotation.x,t.rotation.y,t.rotation.z),n.scale.set(t.scale.x,t.scale.y,t.scale.z),void t.parent.remove(t)},this.loadMMM=function(t){this.par.par.par.getId(1*t.id,function(e){t.obCont=e,r.loadMod()})},this.loadMod=function(){for(var t=0;t<this.arrName.length;t++)if(null==this.arrName[t].obCont)return void this.loadMMM(this.arrName[t]);this.parsing(this.c3d),this.par.dragFilt()},this.loadMod()}else this.par.dragFilt()}function j(t){this.type="CeshGeom";var e=this;e.kolCount=9999,this.par=t;var i,r,n={};function a(t,e,i,r){i&&e.updateMatrixWorld(),r&&t.updateMatrixWorld();var n=(new THREE.Matrix4).getInverse(e.matrixWorld);t.parent&&n.multiply(t.parent.matrixWorld),t.applyMatrix(n),e.add(t)}this.set=function(t){for(var i in n={},e.fillObjMesh(t),n)n[i].length>=2&&new w(this,t,n[i])},this.sliteGeom=new O,this.groupGeometri=function(t){n={},e.fillObjMesh(t);var o=!1;for(var s in n)if(n[s].length>=2){o=!0,this.sliteGeom.start(n[s][0].geometry.clone());for(var h=n[s].length-1;h>=0;h--)a(i=n[s][h],t),this.sliteGeom.setMesh(i),i.parent.remove(i);this.sliteGeom.final(),r=new THREE.Mesh(this.sliteGeom.creatGeom,i.material),t.add(r)}o&&e.killNull(t)},e.killNull=function(t){if(t.children)for(var i=t.children.length-1;i>=0;i--)e.killNull(t.children[i]);null!=t.geometry||null==t.children||0!=t.children.length||null==t.parent||t.parent.remove(t)},e.fillObjMesh=function(t){for(var i=function t(e){var i=[];e.updateMatrixWorld();e instanceof THREE.Mesh&&i.push(e);for(var r=0;r<e.children.length;r++)for(var n=t(e.children[r]),a=0;a<n.length;a++)i.push(n[a]);return i}(t),r=0;r<i.length;r++)i[r].geometry&&i[r].geometry.index&&i[r].geometry.index.count<e.kolCount&&(n[i[r].geometry.uuid]=n[i[r].geometry.uuid]||[],n[i[r].geometry.uuid].push(i[r]))},this.moveObject=function(t,e,i,r){a(t,e,i,r)}}function w(t,e,i){this.type="LoadTime";var r,a=this;this.par=t,this.c3d=e,this.arr=i,this.mesh=i[0],this.geom=i[0].geometry,this.mate=i[0].material;var o=!0;this.initLoad=function(){o=!1,a.mate&&null!=a.mate.idObj&&0==a.mate.loadTexure&&(o=!0),0==o?setTimeout(function(){a.initLoad()},50):a.creat()},this.creat=function(){for(var t=i.length-1;t>=0;t--)r=i[t],this.par.moveObject(r,e),r.parent.remove(r);this.meshCombined=new n(i),e.add(this.meshCombined);for(this.meshCombined._meshes,t=0;t<this.meshCombined.children.length;t++)this.meshCombined.children[t].castShadow=r.castShadow,this.meshCombined.children[t].receiveShadow=r.receiveShadow,this.meshCombined.children[t].renderOrder=r.renderOrder;this.par.killNull(e)},this.initLoad()}function O(){this.type="SliteGeom";var t;this.geometry,this.kol,this.ah=[],this.sah=0,this.sahMesh=0,this.creatGeom,this.ap=[],this.ai=[],this.auv=[],this.start=function(t){this.geometry=t,this.creatGeom=new THREE.BufferGeometry,this.sah=0,this.sahMesh=0,this.ap=[],this.ai=[],this.auv=[],this.sPosit()},this.sPosit=function(){for(var t=0;t<this.geometry.index.count;t++)null==this.ah[this.sah]&&(this.ah[this.sah]=new _),this.ah[this.sah].posOld.set(this.geometry.attributes.position.array[3*this.geometry.index.array[t]],this.geometry.attributes.position.array[3*this.geometry.index.array[t]+1],this.geometry.attributes.position.array[3*this.geometry.index.array[t]+2]),this.ah[this.sah].uv.set(this.geometry.attributes.uv.array[2*this.geometry.index.array[t]],this.geometry.attributes.uv.array[2*this.geometry.index.array[t]+1]),this.ah[this.sah].index=this.geometry.index.array[t],this.sah++},this.setMesh=function(e){t=this.sahMesh*this.sah;for(var i=0;i<this.sah;i++)this.ah[i].setMesh(e),this.ap.push(this.ah[i].pos.x,this.ah[i].pos.y,this.ah[i].pos.z),this.auv.push(this.ah[i].uv.x,this.ah[i].uv.y),this.ai.push(this.ah[i].index+t);this.sahMesh++},this.final=function(){this.creatGeom.setIndex(this.ai),this.creatGeom.addAttribute("position",new THREE.BufferAttribute(new Float32Array(this.ap),3)),this.creatGeom.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(this.auv),2)),this.creatGeom.attributes.position.needsUpdate=!0,this.creatGeom.attributes.uv.needsUpdate=!0,this.creatGeom.computeVertexNormals(),this.creatGeom.attributes.normal.needsUpdate=!0,this.creatGeom.computeBoundingBox(),this.creatGeom.computeBoundingSphere()}}function _(){this.type="SliteGeom",this.pos=new THREE.Vector3,this.posOld=new THREE.Vector3,this.uv=new THREE.Vector2,this.index=0,this.setMesh=function(t){this.pos.set(this.posOld.x,this.posOld.y,this.posOld.z),this.pos.applyMatrix4(t.matrix)}}function A(t){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t,e,i){this.type="PMFilt";var r,n,a,o=this;this.par=t,this.visi3D=e,this.objbase=i,this.setHron=function(t,e){var i,r;i=t.object.iz,r=t.content3d,e&&(r=e),null!=r&&null!=i&&1==i.a&&this.setMod(r,this.strToObj(i.str),i.st)},this.strToObj=function(t){for(var e="",i=0;i<t.length;i++)"|"==t[i]?e+='"':e+=t[i];return JSON.parse(e)},this.getIz=function(t){if(r++,null!=t.iz){var e=0;null!=t.iz.renderOrder&&(0==e&&(e={}),e.renderOrder=t.iz.renderOrder),null!=t.iz.bs&&(0==e&&(e={}),e.bs=t.iz.bs),null!=t.iz.mod&&(0==e&&(e={}),e.mod=t.iz.mod),null!=t.iz.position&&(0==e&&(e={}),e.position=t.iz.position),null!=t.iz.scale&&(0==e&&(e={}),e.scale=t.iz.scale),null!=t.iz.rotation&&(0==e&&(e={}),e.rotation=t.iz.rotation),null!=t.iz.visible&&(0==e&&(e={}),e.visible=t.iz.visible),null!=t.iz.material&&(0==e&&(e={}),e.material=t.iz.material),0!=e&&(e.sah=r),n.push(e)}else n.push(0);if(t.children&&null==t.notPar)for(var i=0;i<t.children.length;i++)this.getIz(t.children[i])},this.getMod=function(t){return r=-1,n=[],this.getIz(t),n},this.setIz=function(t,e){if(a[++r]&&0!=a[r]){if(t.iz={},null!=a[r].mod){e&&(t.iz.mod=a[r].mod);for(var i=new THREE.Object3D,n=0,s=0;s<t.parent.children.length;s++)t.parent.children[s].uuid==t.uuid&&(n=s);i.notPar=!0,t.parent.add(i),t.parent.remove(t),i.parent.children.splice(i.parent.children.length-1,1),i.parent.children.splice(n,0,i),o.par.getId(a[r].mod,function(t){i.add(t)})}null!=a[r].renderOrder&&(e&&(t.iz.renderOrder=a[r].renderOrder),t.renderOrder=a[r].renderOrder),null!=a[r].bs&&(e&&(t.iz.bs=a[r].bs),t.bs=a[r].bs),null!=a[r].position&&(e&&(t.iz.position=a[r].position),t.position.set(a[r].position.x,a[r].position.y,a[r].position.z)),null!=a[r].scale&&(e&&(t.iz.scale=a[r].scale),t.scale.set(a[r].scale.x,a[r].scale.y,a[r].scale.z)),null!=a[r].rotation&&(e&&(t.iz.rotation=a[r].rotation),t.rotation.set(a[r].rotation.x,a[r].rotation.y,a[r].rotation.z)),null!=a[r].visible&&(e&&(t.iz.visible=a[r].visible),t.visible=a[r].visible),null!=a[r].material&&t.material&&(null==t.oldName&&(t.oldName=t.material.name),e&&(t.iz.material=a[r].material),t.material=o.par.mat.getIDReturn(a[r].material))}if(t.children&&null==t.notPar)for(s=0;s<t.children.length;s++)this.setIz(t.children[s])},this.setMod=function(t,e,i){"object"==A(e)&&null!=e[0]&&(a=e,r=-1,this.setIz(t,i))},this.setMat=function(t,e,i,r){if(null!=r&&(r=!0),null!=t.material&&(null==t.oldName&&(t.oldName=t.material.name),"string"==typeof e&&(e=this.par.mat.getIDReturn(e,r)),null==i?(t.material=e,null==t.iz&&(t.iz={}),t.iz.material=e.idUz):t.oldName&&-1!=t.oldName.indexOf(i)&&(t.material=e,null==t.iz&&(t.iz={}),t.iz.material=e.idUz)),t.children&&null==t.notPar)for(var n=0;n<t.children.length;n++)this.setMat(t.children[n],e,i,r)}}function R(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}THREE.ShaderChunk.begin_vertex=p,THREE.ShaderChunk.color_fragment=m,THREE.ShaderChunk.color_pars_fragment=y,THREE.ShaderChunk.color_vertex=b,THREE.ShaderChunk.defaultnormal_vertex=v,THREE.ShaderChunk.uv_pars_vertex=g;var I=function(){function t(e,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type="PMTexture",this.par=e,this.visi3D=i,this.objbase=r,this.loader=new THREE.TextureLoader,this.textureCache={},window.textureCache=this.textureCache}var e,i,r;return e=t,(i=[{key:"getById",value:function(t,e){var i=this;if(this.textureCache[t]&&this.textureCache[t].loaded)return e&&setTimeout(function(){return e(i.textureCache[t].texture)},0),this.textureCache[t].texture;var r=this.getObj(t);return this.loadTexture(r,e)}},{key:"loadTexture",value:function(t,e){var i=this;if(this.textureCache[t.id]&&this.textureCache[t.id].callbacks||(this.textureCache[t.id]={callbacks:[]}),!this.textureCache[t.id].texture){var r=window.location.href.split("/");r.pop();var n=r.join("/")+"/resources/data/"+t.id+"/pic."+t.type,a=this.loader.load(n,function(e){i.visi3D&&(i.visi3D.intRend=1),e.obj={},i.textureCache[t.id].callbacks.forEach(function(t){return t(e)}),delete i.textureCache[t.id].callbacks,i.textureCache[t.id].loaded=!0});a.arrMat=[],a.arrRun=[],a.wrapS=a.wrapT=THREE.RepeatWrapping,a.repeat.x=t.rx,a.repeat.y=t.ry,this.textureCache[t.id].texture=a}return e&&this.textureCache[t.id].callbacks.push(e),this.textureCache[t.id].texture}},{key:"updateTexture",value:function(t,e){var i=this;if(this.textureCache[t.id])if(e){var r=new Image,n=window.location.href.split("/");n.pop(),r.src=n.join("/")+"/resources/data/"+t.id+"/pic."+t.type,this.textureCache[t.id].texture.image=r,this.textureCache[t.id].loaded=!1,r.onload=function(){delete i.textureCache[t.id].callbacks,i.textureCache[t.id].loaded=!0,i.textureCache[t.id].texture.needsUpdate=!0}}else this.textureCache[t.id].texture.repeat.x=t.rx,this.textureCache[t.id].texture.repeat.y=t.ry}},{key:"getObj",value:function(t){return this.objbase.textures.find(function(e){return e.id===t})||null}}])&&R(e.prototype,i),r&&R(e,r),t}();function H(t){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){this.type="PM";this.objbase=e,this.visi3D=t,this.plus="?1",this.loaderGLTF=new THREE.GLTFLoader,this.tex=new I(this,t,e),this.mat=new r.a(this,t,e),this.filt=new x(this,t,e),this.iz=new S(this,t,e),this.arrayHron=[],this.getId=function(t,e,i){if(1==i)for(var r=0;r<this.arrayHron.length;r++)1==this.arrayHron[r].testId(t)&&this.arrayHron.splice(r,1);for(r=0;r<this.arrayHron.length;r++)if(1==this.arrayHron[r].testId(t))return void this.arrayHron[r].setFun(e);this.arrayHron.push(new z(this,t,e))},this.clear=function(){}}function z(t,e,i){this.type="Hron";var r,n,a=this;this.par=t,this.idObj=e,this.id=void 0,this.object=void 0,this.link=void 0,this.filt=void 0,this.content3d=void 0,this.array=[],this.array.push(i),this.boolClone=!0,this.setFun=function(t){if(null!=this.content3d)return(r=1==a.boolClone?a.content3d.clone():a.content3d).hron=this,this.par.iz.setHron(this,r),this.object.param&&this.par.filt.dragParam(r,this.object.param),void t(r);this.array.push(t)},this.finalLoad=function(t){this.getObj3D(t),this.content3d=t,t.name="hron_"+this.id,this.par.mat.setObjS(this.content3d,this.object,this.finalLoad1)},this.finalLoad1=function(){a.par.filt.setObjS(a,a.finalLoad2)},this.finalLoad2=function(){for(var t=0;t<a.array.length;t++)(r=1==a.boolClone?a.content3d.clone():a.content3d).hron=a,a.par.iz.setHron(a,r),a.object.param&&a.par.filt.dragParam(r,a.object.param),a.array[t](r)},this.start=function(t){this.object=t,null!=this.object.param.clone&&0==this.object.param.clone&&(this.boolClone=!1),this.id=t.id,this.link="resources/data/"+this.id+"/mod/"+this.object.mod.name,"n"==this.object.mod.name?this.finalLoad(new THREE.Mesh(new THREE.BoxBufferGeometry(100,100,100))):this.par.loaderGLTF.load(this.link,function(t){a.finalLoad(t.scene)})},this.testId=function(t){return n="number"==typeof t?t:t.id,(null==this.id?this.idObj.id:this.id)==n},this.getObj3D=function(e){if(null!=e.material&&null!=e.material.roughnessMap&&t.visi3D&&(e.material.envMap=t.visi3D.cubeMap.getTexture()),null!=e){if(null!=e.children)for(var i=e.children.length-1;i>=0;i--)this.getObj3D(e.children[i]);"Default_light"==e.name&&e.parent.remove(e)}},"object"!=H(e)?"number"==typeof e&&$.ajax({url:"resources/data/"+e+"/config.json"+a.par.plus,success:function(t){"string"==typeof t?a.start(JSON.parse(t)):a.start(t)},error:function(t){console.log("Что то случилось с конфигом")}}):this.start(e)}i.d(e,"a",function(){return C})},function(module,__webpack_exports__,__webpack_require__){"use strict";function PMMat(par,visi3D,objbase){this.type="PMMat";var self=this;this.par=par,this.visi3D=visi3D,this.objbase=objbase,this.pmTexture=this.par.tex,this.ser=window.location.href;var arrParams=window.location.href.split("?"),arrParams2=arrParams[0].split("/");this.server="";for(var i=0;i<arrParams2.length-1;i++)this.server+=arrParams2[i]+"/";this.setObjS=function(t,e,i){this.getTestTitleObj(t),i()},this.testObjMatLoad=function(t){if(t.children)for(var e=0;e<t.children.length;e++)if(0==this.testObjMatLoad(t.children[e]))return!1;return!t.material||null==t.material.bLoad||0!=t.material.bLoad},this.matarialArray=this.objbase.materials;var matarialArray=this.matarialArray;this.idColor=null;var loader=new THREE.TextureLoader,rt,textur;this.obj={},this.getTestTitle=function(t){var e=null;if(null!=t)for(var i=0;i<matarialArray.length;i++)if(-1!=t.indexOf(matarialArray[i].title))return e=this.getIDReturn(matarialArray[i].id);return e},this.getTestTitleObj=function(t){t.material&&null!=(rt=this.getTestTitle(t.material.name))&&(t.material=rt);for(var e=0;e<t.children.length;e++)this.getTestTitleObj(t.children[e])},this.getIDReturn=function(id,isBD){for(var r=null,p=-1,i=0;i<matarialArray.length;i++)matarialArray[i].id==id&&(p=i);if(-1==p)return null;if(null==isBD&&null!=this.obj[id])return this.obj[id];var comand="new THREE."+matarialArray[p].key+"()",m=eval(comand);return m.idObj=matarialArray[p],this.startMat(m,id),this.obj[id]=m,m.idUz=id,m},this.get=function(t,e,i){var r,n,a=-1;if(null!=i){r=t+"",t="2456567567867896789";for(var o=0;o<this.matarialArray.length;o++)if(n=this.matarialArray[o].title+"",-1!=r.indexOf(n)){t=this.matarialArray[o].title;break}}for(o=0;o<this.matarialArray.length;o++)this.matarialArray[o].title==t&&(a=o);-1!=a?this.getId(this.matarialArray[a].id,e):e(null)},this.getId=function(id,_fun){for(var p=-1,i=0;i<this.matarialArray.length;i++)if(this.matarialArray[i].id==id){p=i;break}if(-1!=p){if(null!=this.obj[id])return 1==this.obj[id].bLoad?_fun(this.obj[id]):this.obj[id].arrFun.push(_fun),this.obj[id];var comand="new THREE."+this.matarialArray[p].key+"()",m=eval(comand);return m.idObj=matarialArray[p],m.bLoad=!1,m.loadTexure=999,m.arrFun=[_fun],this.startMat(m,id),this.obj[id]=m,m}_fun(null)},this.objToMater=function(t,e){var i=this;for(var r in t)null!=e[r]&&(e[r]instanceof THREE.Color?e[r]=new THREE.Color(t[r]):e[r]=t[r]);if(e.loadTexure=0,t.textur){e.loadTexure=t.textur.length;for(var n=0;n<t.textur.length;n++)t.textur[n].id?function(){var r=n;textur=i.pmTexture.getById(t.textur[n].id,function(i){e[t.textur[r].name]=i,--e.loadTexure}),e[t.textur[n].name]=textur}():((textur=loader.load(t.textur[n].link,function(){self.visi3D&&(self.visi3D.intRend=1),e.loadTexure--})).wrapS=textur.wrapT=THREE.RepeatWrapping,textur.repeat.x=t.textur[n].rx,textur.repeat.y=t.textur[n].ry,e[t.textur[n].name]=textur)}if(e.needsUpdate=!0,e.bLoad=!0,e.arrFun)for(n=0;n<e.arrFun.length;n++)e.arrFun[n](e)},this.startMat=function(t,e){var i,r=this.server+"resources/data/"+e+"/config.json"+self.par.plus;$.ajax({url:r,success:function(e){if("string"==typeof e){var r=JSON.parse(e);i=r}else i=e;!0===i.mirro?self.visi3D&&(t.envMap=self.visi3D.getEnvMap()):(i.mirro,1==i.mirro&&self.visi3D&&(t.envMap=self.visi3D.getEnvMap()),2==i.mirro&&self.visi3D&&(t.envMap=self.visi3D.getEnvMap1())),self.objToMater(i.obj,t)},error:function(t){self.start()}})}}__webpack_require__.d(__webpack_exports__,"a",function(){return PMMat})},function(t,e,i){"use strict";i.r(e),function(t){var r=i(0);i.d(e,"PM",function(){return r.a}),t.PM=r.a}.call(this,i(3))},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i}]);